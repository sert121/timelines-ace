# Tauri + React + Typescript Screen Recorder

This project is a screen recording application built using the Tauri framework, with a frontend developed in React and Typescript.

## Recommended IDE Setup

*   [VS Code](https://code.visualstudio.com/) + [Tauri](https://marketplace.visualstudio.com/items?itemName=tauri-apps.tauri-vscode) + [rust-analyzer](https://marketplace.visualstudio.com/items?itemName=rust-lang.rust-analyzer)
    

## Project Structure and File Descriptions

This section details the purpose of each file and directory within the project.

### Root Directory

*   README.md: This file. Provides an overview of the project, setup instructions, and file descriptions.
    
*   index.html: The main HTML file that serves as the entry point for the React application. It contains the root element (#root) where the React app will be mounted and includes the script tag to load the compiled Javascript.
    
*   package.json: Manages the project's dependencies, scripts for development and building, and other project metadata. It lists both frontend (React, Typescript, Vite) and Tauri-specific dependencies.
    
*   tsconfig.json: The Typescript configuration file for the frontend code (src). It defines compiler options, included files, and path mappings.
    
*   tsconfig.node.json: A separate Typescript configuration file specifically for Node.js-related files, such as vite.config.ts.
    
*   vite.config.ts: The configuration file for Vite, the build tool used for the frontend. It includes specific settings for Tauri development, such as port configuration and ignoring the src-tauri directory from hot module replacement.
    

### src/ Directory

This directory contains the source code for the React frontend application.

*   src/App.css: Contains global CSS styles for the main application container and basic element styling (input, button, h1).
    
*   src/App.tsx: The main React component that renders the application's UI. It currently includes the RecordingControls component.
    
*   src/main.tsx: The entry point for the React application. It uses ReactDOM.createRoot to render the App component into the #root element in index.html.
    
*   src/vite-env.d.ts: A declaration file for Vite's client environment variables.
    
*   src/components/: Contains reusable React components.
    

*   src/components/RecordingControls.tsx: A React component that provides the user interface for controlling the screen recording (start/stop button, duration display). It interacts with the Tauri backend via invoke and uses the RecordingFactory service.
    
*   src/components/TauriTest.tsx: A test component to verify communication with the Tauri backend by invoking simple commands like greet and get\_platform. (Note: This component is included in the code but not currently rendered in App.tsx).
    

*   src/platforms/: Contains platform-specific implementations for screen recording.
    

*   src/platforms/mac/mac-recording.service.ts: Implements the RecordingService interface for macOS. It uses the native screencapture command via Tauri's Command API.
    
*   src/platforms/windows/windows-recording.service.ts: Implements the RecordingService interface for Windows. It appears to attempt to use the Xbox Game Bar or a similar mechanism via PowerShell commands.
    

*   src/services/: Contains service classes for application logic.
    

*   src/services/recording-factory.service.ts: A factory class responsible for creating the appropriate RecordingService instance based on the detected platform. It interacts with the Tauri backend to get the platform information.
    
*   src/services/recording.service.ts: An abstract base class for recording services (BaseRecordingService). It defines the common interface (RecordingService) and provides shared logic like the duration timer.
    

*   src/styles/: Contains CSS files for specific components.
    

*   src/styles/RecordingControls.css: Contains specific styles for the RecordingControls component.
    

*   src/types/: Contains Typescript type definitions and interfaces.
    

*   src/types/recording.ts: Defines interfaces for RecordingOptions, RecordingState, RecordingService, Platform, and RecordingStats.
    

### src-tauri/ Directory

This directory contains the Rust source code for the Tauri backend.

*   src-tauri/build.rs: A Rust build script. In this case, it simply calls tauri\_build::build(), which is necessary for Tauri to generate the necessary build artifacts.
    
*   src-tauri/Cargo.lock: Automatically generated by Cargo (Rust's package manager). It records the exact versions of all dependencies used in the build to ensure reproducible builds.
    
*   src-tauri/Cargo.toml: The manifest file for the Rust project. It declares dependencies (including Tauri), defines the package, and configures the build. (This file was not provided in the input but is essential for a Tauri project).
    
*   src-tauri/src/: Contains the main Rust source code for the backend logic.
    

*   src-tauri/src/main.rs: The entry point for the Rust backend. It initializes the Tauri application, defines the backend commands (greet, get\_platform, start\_recording, stop\_recording, get\_recording\_state), and handles communication with the frontend. (This file was not provided in the input but is essential).
    

## Functionality Overview

The application's core functionality revolves around the RecordingControls component interacting with the Tauri backend via defined commands.

1.  Initialization: On startup, the RecordingControls component invokes the get\_platform command to determine the operating system. It then uses the RecordingFactory to instantiate the appropriate platform-specific recording service (though the provided frontend code seems to directly invoke backend commands rather than using the client-side service implementations).
    
2.  Starting Recording: When the "Start Recording" button is clicked, the handleStartRecording function is called. This function invokes the start\_recording Tauri command, passing the desired recording options.
    
3.  Stopping Recording: When the "Stop Recording" button is clicked, the handleStopRecording function is called. This function invokes the stop\_recording Tauri command. The backend is expected to return the path where the recording was saved.
    
4.  Duration Display: A timer is managed in the RecordingControls component to display the elapsed recording time.
    
5.  State Management: The RecordingControls component maintains state for whether a recording is in progress, the duration, and any errors. It also attempts to get the initial recording state from the backend when the component mounts and when the application window becomes visible.
    
6.  Platform-Specific Implementation: The actual recording logic is intended to be handled in the Rust backend, using platform-specific APIs or commands (screencapture on macOS, potentially others on Windows) invoked by the frontend commands. The client-side service files (mac-recording.service.ts, windows-recording.service.ts) seem to be a potential alternative or supplementary approach, but the current RecordingFactory and RecordingControls primarily rely on direct Tauri invoke calls to backend commands.
    

## Development and Building

To run and build the application, you would typically use the Tauri CLI commands defined in package.json:

*   npm run tauri dev: Starts the application in development mode with hot-reloading.
    
*   npm run tauri build: Builds the application for distribution.
    
